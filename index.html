<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem HACCP - Monitorizare Temperature</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: all 0.5s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #007bff;
        }
        
        .stat-card:hover::before {
            left: 100%;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 1em;
            font-weight: 500;
        }
        
        .spaces-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .space-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .space-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #007bff, #28a745, #ffc107, #dc3545);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .space-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.12);
            border-color: #007bff;
        }
        
        .space-card:hover::before {
            transform: scaleX(1);
        }
        
        .space-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .space-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }
        
        .space-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .temp-range {
            color: #007bff;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .space-body {
            padding: 25px;
        }
        
        .space-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mini-stat {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .mini-stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }
        
        .mini-stat-label {
            font-size: 0.85em;
            color: #6c757d;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,123,255,0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40,167,69,0.3);
        }
        
        .management-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
            border: 2px solid #dee2e6;
        }
        
        .management-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .management-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .btn-large {
            padding: 20px;
            font-size: 1.1em;
            border-radius: 15px;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #117a8b);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .spaces-grid {
                grid-template-columns: 1fr;
            }
            
            .space-card {
                margin-bottom: 20px;
            }
        }
        
        /* Animații pentru încărcare */
        .space-card {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .space-card:nth-child(1) { animation-delay: 0.1s; }
        .space-card:nth-child(2) { animation-delay: 0.2s; }
        .space-card:nth-child(3) { animation-delay: 0.3s; }
        .space-card:nth-child(4) { animation-delay: 0.4s; }
        .space-card:nth-child(5) { animation-delay: 0.5s; }
        .space-card:nth-child(6) { animation-delay: 0.6s; }
        .space-card:nth-child(7) { animation-delay: 0.7s; }
        .space-card:nth-child(8) { animation-delay: 0.8s; }
        .space-card:nth-child(9) { animation-delay: 0.9s; }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌡️ Sistem HACCP</h1>
            <p>Monitorizare Digitală a Temperaturilor - Bucătărie Fast Food</p>
        </div>
        
        <div class="main-content">
            <!-- Dashboard Stats -->
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalRecords">0</div>
                    <div class="stat-label">Înregistrări Totale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayRecords">0</div>
                    <div class="stat-label">Înregistrări Astăzi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="alertsCount">0</div>
                    <div class="stat-label">Alerte Active</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">9</div>
                    <div class="stat-label">Spații Monitorizate</div>
                </div>
            </div>
            
            <!-- Spațiile Frigorifice -->
            <div class="spaces-grid">
                <!-- Masa Rece Salate -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🥗</div>
                        <div class="space-name">Masa Rece Salate</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="salate-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="salate-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('masa-rece-salate')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('masa-rece-salate')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Masa Rece Sosuri -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🍅</div>
                        <div class="space-name">Masa Rece Sosuri</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="sosuri-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="sosuri-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('masa-rece-sosuri')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('masa-rece-sosuri')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Congelator Produse -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🧊</div>
                        <div class="space-name">Congelator Produse Ambalate</div>
                        <div class="temp-range">≤ -18°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="congelator-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="congelator-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('congelator-produse')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('congelator-produse')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Ciorbe -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🍲</div>
                        <div class="space-name">Frigider Ciorbe</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="ciorbe-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="ciorbe-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-ciorbe')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-ciorbe')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Legume -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🥕</div>
                        <div class="space-name">Frigider Legume & Fructe</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="legume-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="legume-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-legume')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-legume')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Sosuri și Preparat -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🍝</div>
                        <div class="space-name">Frigider Sosuri și Preparat Gătit</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="preparat-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="preparat-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-sosuri-preparat')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-sosuri-preparat')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Carne -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🥩</div>
                        <div class="space-name">Frigider Carne</div>
                        <div class="temp-range">0°C – +4°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="carne-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="carne-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-carne')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-carne')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Lactate -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">🥛</div>
                        <div class="space-name">Frigider Lactate</div>
                        <div class="temp-range">+2°C – +5°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="lactate-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="lactate-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-lactate')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-lactate')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
                
                <!-- Frigider Rezervă -->
                <div class="space-card">
                    <div class="space-header">
                        <div class="space-icon">📦</div>
                        <div class="space-name">Frigider/Congelator Rezervă</div>
                        <div class="temp-range">+2°C – +5°C / ≤ -18°C</div>
                    </div>
                    <div class="space-body">
                        <div class="space-stats">
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="rezerva-count">0</div>
                                <div class="mini-stat-label">Înregistrări</div>
                            </div>
                            <div class="mini-stat">
                                <div class="mini-stat-number" id="rezerva-avg">-°C</div>
                                <div class="mini-stat-label">Media Temp</div>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href="#" class="btn btn-primary" onclick="openMonitoringPage('frigider-rezerva')">📊 Monitorizare</a>
                            <a href="#" class="btn btn-success" onclick="printReport('frigider-rezerva')">🖨️ Print</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Management Section -->
            <div class="management-section">
                <div class="management-title">📋 Management și Rapoarte</div>
                <div class="management-buttons">
                    <a href="#" class="btn btn-info btn-large" onclick="viewAllRecords()">
                        📊 Toate Înregistrările
                    </a>
                    <a href="#" class="btn btn-warning btn-large" onclick="viewAlerts()">
                        ⚠️ Alerte Temperature
                    </a>
                    <a href="#" class="btn btn-success btn-large" onclick="exportData()">
                        📤 Export Date
                    </a>
                    <a href="#" class="btn btn-danger btn-large" onclick="clearOldData()">
                        🗑️ Curățare Date Vechi
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Database simulation using localStorage
        class HACCPDatabase {
            constructor() {
                this.dbName = 'haccp_temperatures';
                this.init();
            }
            
            init() {
                if (!localStorage.getItem(this.dbName)) {
                    localStorage.setItem(this.dbName, JSON.stringify({}));
                }
            }
            
            getData() {
                return JSON.parse(localStorage.getItem(this.dbName) || '{}');
            }
            
            saveData(data) {
                localStorage.setItem(this.dbName, JSON.stringify(data));
            }
            
            addRecord(spaceId, record) {
                const data = this.getData();
                if (!data[spaceId]) {
                    data[spaceId] = [];
                }
                record.id = Date.now();
                record.timestamp = new Date().toISOString();
                data[spaceId].push(record);
                this.saveData(data);
                return record.id;
            }
            
            getRecords(spaceId) {
                const data = this.getData();
                return data[spaceId] || [];
            }
            
            getAllRecords() {
                return this.getData();
            }
            
            getRecordsCount(spaceId) {
                return this.getRecords(spaceId).length;
            }
            
            getAverageTemp(spaceId) {
                const records = this.getRecords(spaceId);
                if (records.length === 0) return null;
                
                const sum = records.reduce((acc, record) => acc + parseFloat(record.temperature), 0);
                return (sum / records.length).toFixed(1);
            }
            
            getTodayRecordsCount() {
                const today = new Date().toDateString();
                const allData = this.getAllRecords();
                let count = 0;
                
                Object.values(allData).forEach(spaceRecords => {
                    count += spaceRecords.filter(record => 
                        new Date(record.timestamp).toDateString() === today
                    ).length;
                });
                
                return count;
            }
            
            getTotalRecordsCount() {
                const allData = this.getAllRecords();
                let count = 0;
                Object.values(allData).forEach(spaceRecords => {
                    count += spaceRecords.length;
                });
                return count;
            }
        }
        
        // Initialize database
        const db = new HACCPDatabase();
        
        // Space configurations
        const spaces = {
            'masa-rece-salate': {
                name: 'Masa Rece Salate',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🥗'
            },
            'masa-rece-sosuri': {
                name: 'Masa Rece Sosuri',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🍅'
            },
            'congelator-produse': {
                name: 'Congelator Produse Ambalate',
                tempRange: '≤ -18°C',
                minTemp: -30,
                maxTemp: -18,
                icon: '🧊'
            },
            'frigider-ciorbe': {
                name: 'Frigider Ciorbe',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🍲'
            },
            'frigider-legume': {
                name: 'Frigider Legume & Fructe',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🥕'
            },
            'frigider-sosuri-preparat': {
                name: 'Frigider Sosuri și Preparat Gătit',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🍝'
            },
            'frigider-carne': {
                name: 'Frigider Carne',
                tempRange: '0°C – +4°C',
                minTemp: 0,
                maxTemp: 4,
                icon: '🥩'
            },
            'frigider-lactate': {
                name: 'Frigider Lactate',
                tempRange: '+2°C – +5°C',
                minTemp: 2,
                maxTemp: 5,
                icon: '🥛'
            },
            'frigider-rezerva': {
                name: 'Frigider/Congelator Rezervă',
                tempRange: '+2°C – +5°C / ≤ -18°C',
                minTemp: -30,
                maxTemp: 5,
                icon: '📦'
            }
        };
        
        // Functions for navigation and actions
        function openMonitoringPage(spaceId) {
            // Create and open monitoring page for specific space
            const space = spaces[spaceId];
            if (!space) return;
            
            const monitoringPage = `
<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitorizare ${space.name} - HACCP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .temp-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #dee2e6;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        .input-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .input-group input, .input-group textarea {
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }
        
        .temperature-input {
            position: relative;
        }
        
        .temperature-input input {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .add-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40,167,69,0.3);
        }
        
        .records-section {
            margin-top: 30px;
        }
        
        .records-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .records-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .back-btn {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108,117,125,0.3);
        }
        
        .records-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .records-table th {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .records-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
        }
        
        .records-table tr:hover {
            background: #f8f9fa;
        }
        
        .temp-good {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
            border-radius: 5px;
            padding: 5px 10px;
        }
        
        .temp-warning {
            background: #fff3cd;
            color: #856404;
            font-weight: bold;
            border-radius: 5px;
            padding: 5px 10px;
        }
        
        .temp-danger {
            background: #f8d7da;
            color: #721c24;
            font-weight: bold;
            border-radius: 5px;
            padding: 5px 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #dee2e6;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-weight: 500;
        }
        
        .no-records {
            text-align: center;
            color: #6c757d;
            font-style: italic;
            padding: 40px;
        }
        
        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; border-radius: 0; }
            .input-section, .back-btn { display: none; }
            .header { background: #2c3e50 !important; }
        }
        
        @media (max-width: 768px) {
            .input-grid { grid-template-columns: 1fr; }
            .records-header { flex-direction: column; gap: 15px; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>${space.icon} ${space.name}</h1>
            <div class="temp-info">
                <strong>Temperatură Țintă: ${space.tempRange}</strong>
            </div>
        </div>
        
        <div class="content">
            <!-- Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">Înregistrări Totale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgTemp">-°C</div>
                    <div class="stat-label">Temperatura Medie</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayCount">0</div>
                    <div class="stat-label">Înregistrări Astăzi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="alertCount">0</div>
                    <div class="stat-label">Alerte</div>
                </div>
            </div>
            
            <!-- Input Section -->
            <div class="input-section">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">📝 Adaugă Înregistrare Nouă</h3>
                <form id="temperatureForm">
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="date">Data:</label>
                            <input type="date" id="date" required>
                        </div>
                        <div class="input-group">
                            <label for="time">Ora:</label>
                            <input type="time" id="time" required>
                        </div>
                        <div class="input-group temperature-input">
                            <label for="temperature">Temperatura (°C):</label>
                            <input type="number" id="temperature" step="0.1" required placeholder="Ex: 3.5">
                        </div>
                        <div class="input-group">
                            <label for="signature">Semnătura:</label>
                            <input type="text" id="signature" required placeholder="Ex: M.P.">
                        </div>
                    </div>
                    <div class="input-group" style="margin-top: 15px;">
                        <label for="observations">Observații:</label>
                        <textarea id="observations" rows="3" placeholder="Observații opționale..."></textarea>
                    </div>
                    <button type="submit" class="add-btn">
                        ➕ Adaugă Înregistrare
                    </button>
                </form>
            </div>
            
            <!-- Records Section -->
            <div class="records-section">
                <div class="records-header">
                    <div class="records-title">📊 Istoric Înregistrări</div>
                    <a href="#" onclick="window.close(); return false;" class="back-btn">← Înapoi la Dashboard</a>
                </div>
                
                <div id="recordsContainer">
                    <div class="no-records">
                        Nu există înregistrări pentru acest spațiu frigorific.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const spaceId = '${spaceId}';
        const space = ${JSON.stringify(space)};
        
        // Database functions (simplified for standalone page)
        function getRecords() {
            const data = JSON.parse(localStorage.getItem('haccp_temperatures') || '{}');
            return data[spaceId] || [];
        }
        
        function saveRecord(record) {
            const data = JSON.parse(localStorage.getItem('haccp_temperatures') || '{}');
            if (!data[spaceId]) data[spaceId] = [];
            
            record.id = Date.now();
            record.timestamp = new Date().toISOString();
            data[spaceId].push(record);
            
            localStorage.setItem('haccp_temperatures', JSON.stringify(data));
            return record.id;
        }
        
        function isTemperatureInRange(temp) {
            return temp >= space.minTemp && temp <= space.maxTemp;
        }
        
        function getTemperatureClass(temp) {
            if (isTemperatureInRange(temp)) return 'temp-good';
            if (Math.abs(temp - space.maxTemp) <= 1 || Math.abs(temp - space.minTemp) <= 1) return 'temp-warning';
            return 'temp-danger';
        }
        
        function updateStatistics() {
            const records = getRecords();
            const today = new Date().toDateString();
            
            // Total count
            document.getElementById('totalCount').textContent = records.length;
            
            // Average temperature
            if (records.length > 0) {
                const sum = records.reduce((acc, record) => acc + parseFloat(record.temperature), 0);
                const avg = (sum / records.length).toFixed(1);
                document.getElementById('avgTemp').textContent = avg + '°C';
            }
            
            // Today's count
            const todayRecords = records.filter(record => 
                new Date(record.timestamp).toDateString() === today
            );
            document.getElementById('todayCount').textContent = todayRecords.length;
            
            // Alerts count
            const alerts = records.filter(record => 
                !isTemperatureInRange(parseFloat(record.temperature))
            );
            document.getElementById('alertCount').textContent = alerts.length;
        }
        
        function renderRecords() {
            const records = getRecords().reverse(); // Most recent first
            const container = document.getElementById('recordsContainer');
            
            if (records.length === 0) {
                container.innerHTML = '<div class="no-records">Nu există înregistrări pentru acest spațiu frigorific.</div>';
                return;
            }
            
            const table = \`
                <table class="records-table">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Ora</th>
                            <th>Temperatura (°C)</th>
                            <th>Observații</th>
                            <th>Semnătura</th>
                        </tr>
                    </thead>
                    <tbody>
                        \${records.map(record => {
                            const date = new Date(record.timestamp);
                            const tempClass = getTemperatureClass(parseFloat(record.temperature));
                            
                            return \`
                                <tr>
                                    <td>\${record.date}</td>
                                    <td>\${record.time}</td>
                                    <td><span class="\${tempClass}">\${record.temperature}°C</span></td>
                                    <td>\${record.observations || '-'}</td>
                                    <td>\${record.signature}</td>
                                </tr>
                            \`;
                        }).join('')}
                    </tbody>
                </table>
            \`;
            
            container.innerHTML = table;
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date and time
            const now = new Date();
            document.getElementById('date').value = now.toISOString().split('T')[0];
            document.getElementById('time').value = now.toTimeString().split(':').slice(0,2).join(':');
            
            // Load and display records
            updateStatistics();
            renderRecords();
        });
        
        // Form submission
        document.getElementById('temperatureForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const record = {
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                temperature: document.getElementById('temperature').value,
                observations: document.getElementById('observations').value,
                signature: document.getElementById('signature').value
            };
            
            saveRecord(record);
            
            // Clear form
            document.getElementById('observations').value = '';
            document.getElementById('signature').value = '';
            
            // Update current time
            const now = new Date();
            document.getElementById('time').value = now.toTimeString().split(':').slice(0,2).join(':');
            
            // Refresh display
            updateStatistics();
            renderRecords();
            
            // Show success message
            alert('✅ Înregistrarea a fost salvată cu succes!');
        });
    </script>
</body>
</html>`;
            
            // Open in new window
            const newWindow = window.open('', '_blank');
            newWindow.document.write(monitoringPage);
            newWindow.document.close();
        }
        
        function printReport(spaceId) {
            // Generate printable report
            const space = spaces[spaceId];
            const records = db.getRecords(spaceId);
            
            const printPage = `
<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raport ${space.name} - HACCP</title>
    <style>
        @page {
            size: A4 portrait;
            margin: 2cm;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2c3e50;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .header h2 {
            font-size: 18px;
            margin-bottom: 5px;
            color: #007bff;
        }
        
        .temp-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            border: 2px solid #dee2e6;
        }
        
        .meta-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .meta-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        
        .meta-card h4 {
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .table-container {
            margin-bottom: 30px;
        }
        
        .records-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .records-table th {
            background: #2c3e50;
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            font-size: 11px;
        }
        
        .records-table td {
            padding: 10px 8px;
            text-align: center;
            border: 1px solid #dee2e6;
            font-size: 11px;
        }
        
        .records-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .temp-good {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
            border-radius: 3px;
            padding: 2px 6px;
        }
        
        .temp-warning {
            background: #fff3cd;
            color: #856404;
            font-weight: bold;
            border-radius: 3px;
            padding: 2px 6px;
        }
        
        .temp-danger {
            background: #f8d7da;
            color: #721c24;
            font-weight: bold;
            border-radius: 3px;
            padding: 2px 6px;
        }
        
        .summary {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 2px solid #dee2e6;
        }
        
        .summary h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        
        .summary-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        
        .summary-number {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 10px;
            color: #6c757d;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
            text-align: center;
            font-size: 10px;
            color: #6c757d;
        }
        
        .signature-section {
            margin-top: 40px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        .signature-box {
            text-align: center;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
        
        .signature-line {
            border-bottom: 1px solid #333;
            margin: 20px 0 10px 0;
            height: 40px;
        }
        
        @media print {
            body { print-color-adjust: exact; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🌡️ RAPORT HACCP - MONITORIZARE TEMPERATURE</h1>
        <h2>${space.icon} ${space.name}</h2>
        <div class="temp-info">
            Temperatură Țintă: ${space.tempRange}
        </div>
    </div>
    
    <div class="meta-info">
        <div class="meta-card">
            <h4>📅 Informații Raport</h4>
            <p><strong>Data generării:</strong> ${new Date().toLocaleDateString('ro-RO')}</p>
            <p><strong>Ora generării:</strong> ${new Date().toLocaleTimeString('ro-RO')}</p>
            <p><strong>Perioada:</strong> Toate înregistrările</p>
        </div>
        <div class="meta-card">
            <h4>📊 Statistici Generale</h4>
            <p><strong>Total înregistrări:</strong> ${records.length}</p>
            <p><strong>Media temperaturilor:</strong> ${db.getAverageTemp(spaceId) || 'N/A'}°C</p>
            <p><strong>Spațiu monitorizat:</strong> ${space.name}</p>
        </div>
    </div>
    
    <div class="table-container">
        ${records.length > 0 ? `
            <table class="records-table">
                <thead>
                    <tr>
                        <th>Nr.</th>
                        <th>Data</th>
                        <th>Ora</th>
                        <th>Temperatura (°C)</th>
                        <th>Observații</th>
                        <th>Semnătura</th>
                    </tr>
                </thead>
                <tbody>
                    ${records.reverse().map((record, index) => {
                        const temp = parseFloat(record.temperature);
                        const tempClass = (temp >= space.minTemp && temp <= space.maxTemp) ? 'temp-good' : 
                                         (Math.abs(temp - space.maxTemp) <= 1 || Math.abs(temp - space.minTemp) <= 1) ? 'temp-warning' : 'temp-danger';
                        
                        return `
                            <tr>
                                <td>${index + 1}</td>
                                <td>${record.date}</td>
                                <td>${record.time}</td>
                                <td><span class="${tempClass}">${record.temperature}°C</span></td>
                                <td>${record.observations || '-'}</td>
                                <td>${record.signature}</td>
                            </tr>
                        `;
                    }).join('')}
                </tbody>
            </table>
        ` : '<p style="text-align: center; font-style: italic; color: #6c757d; padding: 40px;">Nu există înregistrări pentru acest spațiu frigorific.</p>'}
    </div>
    
    ${records.length > 0 ? `
        <div class="summary">
            <h3>📈 Sumar Analitic</h3>
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-number">${records.length}</div>
                    <div class="summary-label">TOTAL ÎNREGISTRĂRI</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number">${db.getAverageTemp(spaceId)}°C</div>
                    <div class="summary-label">TEMPERATURA MEDIE</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number">${records.filter(r => {
                        const temp = parseFloat(r.temperature);
                        return temp >= space.minTemp && temp <= space.maxTemp;
                    }).length}</div>
                    <div class="summary-label">TEMP. ÎN INTERVAL</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number">${records.filter(r => {
                        const temp = parseFloat(r.temperature);
                        return temp < space.minTemp || temp > space.maxTemp;
                    }).length}</div>
                    <div class="summary-label">ALERTE DETECTATE</div>
                </div>
            </div>
        </div>
    ` : ''}
    
    <div class="signature-section">
        <div class="signature-box">
            <p><strong>Responsabil Monitorizare</strong></p>
            <div class="signature-line"></div>
            <p>Semnătura și data</p>
        </div>
        <div class="signature-box">
            <p><strong>Manager HACCP</strong></p>
            <div class="signature-line"></div>
            <p>Semnătura și data</p>
        </div>
    </div>
    
    <div class="footer">
        <p>Acest raport a fost generat automat de Sistemul HACCP de Monitorizare a Temperaturilor</p>
        <p>Document confidențial - utilizare internă</p>
    </div>
    
    <script>
        window.onload = function() {
            window.print();
        };
    </script>
</body>
</html>`;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(printPage);
            printWindow.document.close();
        }
        
        function viewAllRecords() {
            // Generate page with all records from all spaces
            alert('🚧 Funcționalitatea "Toate Înregistrările" va fi implementată în următoarea versiune.');
        }
        
        function viewAlerts() {
            // Generate alerts page
            alert('🚧 Funcționalitatea "Alerte Temperature" va fi implementată în următoarea versiune.');
        }
        
        function exportData() {
            // Export all data as JSON
            const allData = db.getAllRecords();
            const dataStr = JSON.stringify(allData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `HACCP_Export_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(link.href);
        }
        
        function clearOldData() {
            if (confirm('⚠️ Sigur doriți să ștergeți toate datele vechi? Această acțiune nu poate fi anulată.')) {
                localStorage.removeItem('haccp_temperatures');
                location.reload();
            }
        }
        
        // Update dashboard statistics
        function updateDashboard() {
            // Update space-specific stats
            Object.keys(spaces).forEach(spaceId => {
                const count = db.getRecordsCount(spaceId);
                const avg = db.getAverageTemp(spaceId);
                
                const shortId = spaceId.replace('masa-rece-', '').replace('frigider-', '').replace('congelator-', 'congelator');
                
                const countElement = document.getElementById(`${shortId}-count`);
                const avgElement = document.getElementById(`${shortId}-avg`);
                
                if (countElement) countElement.textContent = count;
                if (avgElement) avgElement.textContent = avg ? `${avg}°C` : '-°C';
            });
            
            // Update general stats
            document.getElementById('totalRecords').textContent = db.getTotalRecordsCount();
            document.getElementById('todayRecords').textContent = db.getTodayRecordsCount();
            
            // Calculate alerts
            let alertsCount = 0;
            Object.keys(spaces).forEach(spaceId => {
                const records = db.getRecords(spaceId);
                const space = spaces[spaceId];
                alertsCount += records.filter(record => {
                    const temp = parseFloat(record.temperature);
                    return temp < space.minTemp || temp > space.maxTemp;
                }).length;
            });
            document.getElementById('alertsCount').textContent = alertsCount;
        }
        
        // Initialize dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
            
            // Add some sample data if database is empty (for demo purposes)
            if (db.getTotalRecordsCount() === 0) {
                addSampleData();
                updateDashboard();
            }
        });
        
        // Add sample data for demonstration
        function addSampleData() {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            const sampleRecords = [
                { spaceId: 'masa-rece-salate', temperature: '3.2', observations: 'OK', signature: 'M.P.' },
                { spaceId: 'masa-rece-salate', temperature: '4.1', observations: 'Normal', signature: 'A.S.' },
                { spaceId: 'frigider-carne', temperature: '2.8', observations: 'Verificat', signature: 'D.I.' },
                { spaceId: 'congelator-produse', temperature: '-19.5', observations: 'Funcționează perfect', signature: 'M.P.' },
                { spaceId: 'frigider-lactate', temperature: '3.7', observations: 'OK', signature: 'A.S.' }
            ];
            
            sampleRecords.forEach((sample, index) => {
                const record = {
                    date: index < 3 ? today.toISOString().split('T')[0] : yesterday.toISOString().split('T')[0],
                    time: `${8 + index * 2}:00`,
                    temperature: sample.temperature,
                    observations: sample.observations,
                    signature: sample.signature
                };
                
                db.addRecord(sample.spaceId, record);
            });
        }
    </script>
</body>
</html>